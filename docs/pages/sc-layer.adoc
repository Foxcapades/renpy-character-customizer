[#sc-layer]
= `SCLayer`

Represents a single layer in a customizable sprite.

This layer has zero or more customization options provided at construction time
via named <<sc-opt>> keyword args.  The user's selections of those options are
then passed to the given `layer_callback` to construct the underlying
link:https://www.renpy.org/doc/html/displayables.html[Displayable] for the
layer.

[source, python]
----
SCLayer("name", callback, option=SCOpt("Option", [ "some", "choices" ]))
----

== Methods

=== `+__init__+`

Initializes the new `SCLayer` instance with the given arguments.

==== Arguments

[cols="1h,1m,8"]
|===
| `name`
| str
| Name of the layer.

| `layer_callback`
| function
| Callback used to create the
link:https://www.renpy.org/doc/html/displayables.html[Displayable] that backs
this layer.

| `**options`
| dict
| Dictionary of keyword arguments that define the options available to this
layer.  These keyword args must all be <<sc-opt>> values.
|===

=== `_require_option`

Requires that an option with the given key is known to this layer.  If no such
option is known, an exception will be thrown.

==== Arguments

[cols="1h,1m,8"]
|===
| `option`
| str
| Key to the option to require.
|===

=== `_render`

A callback that is passed to the
link:https://www.renpy.org/doc/html/displayables.html#DynamicDisplayable[DynamicDisplayable]
instances built via the <<sc-lay-build-image>> method.

This method calls out to the configured `layer_callback` with the options
selected in the <<sc-state>>.

==== Arguments

[cols="1h,1m,8"]
|===
| `st`
| float
| The amount of time the displayable has been shown for.

| `at`
| float
| The amount of time any displayable with the same tag has been shown for.

| `**kwargs`
| dict
| Keyword args that are passed through to the `layer_callback` function.
|===

==== Returns

This method returns a `(d, redraw)` tuple where:
[cols="1h,1m,8"]
|===
| `d`
| link:https://www.renpy.org/doc/html/displayables.html[Displayable]
| Displayable generated by the `layer_callback` function.

| `redraw`
| int\|float
| Maximum amount of time to wait before calling this method again.
|===


=== `clone`

Creates a copy of the current `SCLayer` instance.

==== Returns

[cols="1m,9"]
|===
| <<sc-layer>>
| A copy of the current `SCLayer` instance sans user state.
|===


=== `set_state`

Replaces the user state store used by this `SCLayer` instance with the given
`SCState` object.

==== Arguments

[cols="1h,1m,8"]
|===
| `state`
| <<sc-state>>
| New state object to back this layer's customization option selections.
|===

=== `inc_selection`

Increments the user selection for the given option.

==== Arguments

[cols="1h,1m,8"]
|===
| `option`
| str
| Keyword for the option whose selection should be incremented.
|===

=== `dec_selection`

Decrements the user selection for the given option.

==== Arguments

[cols="1h,1m,8"]
|===
| `option`
| str
| Keyword for the option whose selection should be decremented.
|===

=== `get_option`

Returns the target <<sc-opt>> value from the current layer.

==== Arguments

[cols="1h,1m,8"]
|===
| `option`
| str
| Keyword for the option to retrieve.
|===

==== Returns

[cols="1m,9"]
|===
| <<sc-opt>>
| The target `SCOpt` instance.
|===


=== `get_option_value`

Returns the option value for the target option and selection.

==== Example

Given the layer:

[source, python]
----
layer = SCLayer("foo", bar, fizz=SCOpt("Buzz", [ "wing", "ding" ]))
----

the following would be true:

[source, python]
----
layer.get_option_value("fizz", 1) == "wing"
layer.get_option_value("fizz", 2) == "ding"
----

==== Arguments

[cols="1h,1m,8"]
|===
| `option`
| str
| Keyword for the option whose value should be returned.

| `selection`
| int
| `1` based index of the option value to retrieve.
|===

==== Returns

[cols="1m,9"]
|===
| any
| Returns the option value for the target option and selection.
|===


=== `option_display_name`

Returns the display name for the target option.

==== Arguments

[cols="1h,1m,8"]
|===
| `option`
| str
| Keyword for the option whose display name should be returned.
|===

==== Returns

[cols="1m,9"]
|===
| str
| The display name for the target option.
|===

=== `option_selection`

Returns the use selection index for the target option.

==== Arguments

[cols="1h,1m,8"]
|===
| `option`
| str
| Keyword for the option whose value should be returned.
|===

==== Returns

[cols="1m,9"]
|===
| int
| The user selection index for the target option.
|===

[#sc-lay-build-image]
=== `build_image`

Builds the
link:https://www.renpy.org/doc/html/displayables.html#DynamicDisplayable[`DynamicDisplayable`]
that represents this `SCLayer` instance.

==== Returns

[cols="1m,9"]
|===
| link:https://www.renpy.org/doc/html/displayables.html#DynamicDisplayable[`DynamicDisplayable`]
| The newly constructed `DynamicDisplayable` instance.
|===


=== `build_attribute`

Builds a link:https://www.renpy.org/doc/html/layeredimage.html[`LayeredImage`]
https://www.renpy.org/doc/html/layeredimage.html#attribute[`Attribute`] instance
to represent this `SCLayer` instance.

==== Returns

[cols="1m,9"]
|===
| https://www.renpy.org/doc/html/layeredimage.html#attribute[`Attribute`]
| The newly constructed `Attribute` instance.
|===
